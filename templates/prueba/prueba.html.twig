{% extends "base.html.twig" %}

{% block stylesheets %}
    <!-- Incluir el estilo plano del planificador -->
    <link rel='stylesheet' type='text/css' href='{{ asset("libraries/dhtmlx/codebase/dhtmlxscheduler_flat.css") }}' charset="utf-8"/>
    <!-- Si no usa el modo de pantalla completa, ignore el siguiente estilo -->
    <style type="text/css" media="screen">
        html, body{
            margin:0px;
            padding:0px;
            height:100%;
            overflow:hidden;
        }   
    </style>
{% endblock %}

{% block body %}

<div id="scheduler_element" class="dhx_cal_container" style='width:100%; height:100%;'>
    <div class="dhx_cal_navline">
        <div class="dhx_cal_prev_button">&nbsp;</div>
        <div class="dhx_cal_next_button">&nbsp;</div>
        <div class="dhx_cal_today_button"></div>
        <div class="dhx_cal_date"></div>
        <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
        <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
        <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
    </div>
    <div class="dhx_cal_header"></div>
    <div class="dhx_cal_data"></div>       
</div>

{% endblock %}

{% block javascripts %}
    <!-- Incluir la biblioteca del planificador -->
    <script src='{{ asset("libraries/dhtmlx/codebase/dhtmlxscheduler.js") }}' type='text/javascript' charset="utf-8"></script>
    
    <!-- Incluya jQuery para manejar solicitudes AJAX-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Incluye Momentjs para jugar con las fechas -->
    <script src="{{ asset("libraries/momentjs/moment.js") }}"></script>

    <script>
        // Exponer las citas globalmente imprimiendo la cadena JSON con twig y el filtro sin procesar
        // para que puedan ser accesibles por el programador Scripts.js el controlador
        window.GLOBAL_APPOINTMENTS = {{ citas|raw }};

        // Como los scripts del planificador estarán en otros archivos, las rutas generadas por twig
        // también debe estar expuesto en la ventana
        window.GLOBAL_SCHEDULER_ROUTES = {
            create: '{{ path("crear") }}',
            update: '{{ path("update") }}',
            delete: '{{ path("delete") }}'
        };
    </script>

    <!-- Incluya los scripts del planificador que necesitará escribir en el siguiente paso -->
    <script src='{{ asset("libraries/schedulerScripts.js") }}' type='text/javascript' charset="utf-8"></script>
    <script type="text/javascript" src="https://raw.githubusercontent.com/flouthoc/minAjax.js/master/index.js"></script>
{% endblock %}